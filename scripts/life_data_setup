#!/usr/bin/env bash
# -*- coding: utf-8 -*-
#
# Copyright (C) 2019-2020 CERN.
#
# CDS-ILS is free software; you can redistribute it and/or modify it under
# the terms of the MIT License; see LICENSE file for more details.

invenio db destroy --yes-i-know
invenio db init
invenio db create 

invenio index destroy --force --yes-i-know
invenio index init --force
invenio fixtures pages
invenio fixtures location
invenio fixtures vocabularies
invenio fixtures demo-patrons
invenio files location --default ils /tmp/ils-files 
cds-ils user-testing import-demo-data --are-docs --path demo_data/documents.json --verbose
# cds-ils user-testing import-demo-data --are-items --path $ITEMS_PATH  --verbose

# This part requires mounted EOS volume or access to the files
# cds-ils migration documents /eos/media/cds/test/books/migration/records/tmp/demo-books_0.json
# cds-ils migration internal-locations /eos/media/cds/test/books/migration/records/tmp/libraries.json
# cds-ils migration items /eos/media/cds/test/books/migration/records/tmp/items_0.json
# cds-ils migration borrowers /eos/media/cds/test/books/migration/records/tmp/active_users.json

# create eitems from document files
# invenio migration eitems-files
# invenio migration eitems-providers

